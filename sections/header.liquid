<header class="header">
  <div>
    <div class="header__items">
      {% if section.settings.show_search %}
        <form action="/search" method="get" class="search-form ">
          <input
            type="search"
            name="q"
            placeholder="Search for products..."
            class="search-nav"
            id="search-input"
          >
        </form>
      {% endif %}
      {% if section.settings.logo %}
        <img src="{{ section.settings.logo | img_url: 'medium' }}" alt="Logo">
      {% endif %}
      {% if section.settings.show_shop_name %}
        <h1>{{ section.settings.custom_shop_name | default: shop.name }}</h1>
      {% endif %}

      <a class="header_cart" href="/cart">
        <img
          height="30"
          width="30"
          loading="lazy"
          src="{{'cart.svg'  |  asset_url }}"
          alt=""
        >
        {% if cart.item_count > 0 %}
          <span class="cart-item-count">{{ cart.item_count }}</span>
        {% endif %}
      </a>
    </div>
    <ul class="header__links">
      {% for link in linklists['main-menu'].links %}
        <li class="header__links">{{ link.title | link_to: link.url }}</li>
      {% endfor %}
    </ul>
  </div>
</header>

<style>
  .header {
    padding: 20px;
    background: {{ section.settings.bg }}
  }
</style>
<script>
  document.getElementById('search-input').addEventListener('input', function () {
    if (this.value.trim() !== '') {
      document.querySelector('.search-form').submit();
    }
  });
</script>
{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "checkbox",
      "id": "show_search",
      "label": "Show search form?"
    },
    {
      "type": "color",
      "id": "bg",
      "label": "Background color"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color"
    },
    {
      "type": "checkbox",
      "id": "show_shop_name",
      "label": "Show shop name?"
    },
    {
      "type": "text",
      "id": "custom_shop_name",
      "label": "Custom shop name"
    },
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Header logo"
    },
    {
      "type": "checkbox",
      "id": "show_cart_icon",
      "label": "Show cart icon?"
    },
    {
      "type": "select",
      "id": "header_alignment",
      "label": "Header alignment",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ]
    }
  ]
}
{% endschema %}
